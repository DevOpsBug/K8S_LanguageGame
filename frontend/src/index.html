<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="apple-touch-icon" sizes="180x180" href="https://static.devopsbug.com/media/projects/openlingua/images/favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://static.devopsbug.com/media/projects/openlingua/images/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://static.devopsbug.com/media/projects/openlingua/images/favicon/favicon-16x16.png">
        <link rel="manifest" href="https://static.devopsbug.com/media/projects/openlingua/images/favicon/site.webmanifest">  
        <link rel="stylesheet" href="/css/global.css">
        <link rel="stylesheet" href="/css/index.css">
        <title>Language Game</title>
    </head>
    <body>
        <div class="page-container">    

            <!-- GLOBAL HEADER PARTIAL DYNAMICALLY LOADED-->
            <div id="header"></div>

            
            <div id="content">

                <!-- CONTENT AREA -->
                <h1 class="title">Welcome</h1>

                <p id="user-status">Loading...</p>


                <button onclick="window.location.href='/start.html'">Continue as Guest</button>
                <button id="login-btn" onclick="window.location.href='/private/private.html'">Login</button>
                <button id="logout-btn" onclick="window.location.href='/oauth2/logout'">Logout</button>

                <!-- END CONTENT AREA -->
                 
            </div>
            
    

            <!-- GLOBAL FOOTER PARTIAL DYNAMICALLY LOADED -->
            <div id="footer"></div>
        </div>

        <!-- SCRIPT TO DYNAMICALLY LOAD PARTIALS -->
        <script src="/js/layout.js"></script>

        <!-- SCRIPT TO DYNAMICALLY LOAD PARTIALS -->
        <script>
        async function loadUserInfo() {
            try {
                const response = await fetch('/userinfo', { credentials: 'include' });
                const data = await response.json();

                const isLoggedIn = data.authenticated !== "";

                document.getElementById("user-status").textContent = 
                    isLoggedIn ? `Logged in as ${data.email}` : "Guest";

                if (isLoggedIn) {
                    document.getElementById("login-btn").style.display = "none";
                    document.getElementById("logout-btn").style.display = "inline-block";
                } else {
                    document.getElementById("logout-btn").style.display = "none";
                    document.getElementById("login-btn").style.display = "inline-block";
                }

            } catch (err) {
                console.error("Error loading user info", err);
            }
        }
        loadUserInfo();
        </script>


    </body>
</html>
